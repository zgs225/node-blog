function cancel(){var a=document.getElementsByClassName("self-modal")[0];a.parentNode.removeChild(a)}function deleteArticle(){var a,b=document.getElementsByClassName("self-modal")[0].id,c=document.getElementsByClassName("self-modal")[0];console.log(b),a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a.open("delete","/blog/"+b,!1),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var c=document.getElementById(b).parentNode;c.parentNode.removeChild(c)}},a.send(),c.parentNode.removeChild(c)}$(function(a){function b(b){if(b.files&&b.files[0]){var c=new FileReader;c.onload=function(b){a(".img-prev").attr("src",b.target.result).show()},c.readAsDataURL(b.files[0])}else a(".img-prev").hide()}var c='<div class="self-modal"><div class="header">删除?</div><div class="body"><p>你确认要删除我吗？</p><button class="btn btn-default btn-danger confirm" onclick="deleteArticle()">确认</button><button class="btn btn-default cancel" onclick="cancel()">取消</button> </div> </div>';a("textarea#content").focus(function(){a("div.named").show()}),a('input[type="file"][name="image"]').change(function(){b(this)}),a("button.btn-prev").click(function(){a(".article-prev").show()}),a(".article-prev .cancel").click(function(){a(".article-prev").hide()}),a(document).delegate("textarea","keydown",function(b){var c=b.keyCode||b.which;if(9==c){b.preventDefault();var d=a(this).get(0).selectionStart,e=a(this).get(0).selectionEnd;a(this).val(a(this).val().substring(0,d)+"	"+a(this).val().substring(e)),a(this).get(0).selectionStart=a(this).get(0).selectionEnd=d+1}}),a(".recent-article .remove").click(function(){a("body").append(a(c).attr("id",a(this).parent().parent().attr("id")))}),a(".recent-article .edit").click(function(){a("form").hide(),a(".recent-article .slideUp").hide(),a(this).parent().parent().find("li .slideUp").show(),a(this).parent().parent().next("form").show("1000")}),a(".recent-article .slideUp").click(function(){a(this).hide(),a(this).parent().parent().next("form").hide("1000")})});